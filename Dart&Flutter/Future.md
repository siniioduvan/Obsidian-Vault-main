#Flutter #Dart #future

`Future` — это отложенная операция, которая завершится с неким результатом через время.

Это может пригодиться во множестве кейсов: например, нам нужно отправить запрос на сервер, а пока он выполняется, мы хотим выводить время выполнения запроса. Мы попросту не сможем решить эту задачу без неблокирующего кода в языке.

```dart
void serverRequest(){
	print('Start loading');
	var seconds = 0;
	Timer? timer;
Future(getServerData).then((result){
		timer?.cancel();
		print(result);
	});
	// Код ниже будет выполняться уже после старта запроса
	timer = Timer.periodic(Duration(seconds:1), (_) {
		print('Seconds elapsed: ${seconds++}');
	});
}

Future<String> getServerData() => //server request
```

`Future` представляет собой обычный класс с набором конструкторов.

Создать его можно с помощью публичного конструктора:

```dart
Future((){
		// Some async job
});
```

А вот **функция** переданная в конструктор — это и есть **событие**, которое выполнит `Event Loop` и вернёт результат или ошибку в обработчик этого `Future`.

Несколько нюансов:

- `Future API` может даже создать микро-задачу, через factory-конструктор `Future.microtask()` — результат выполнения можно будет обработать как и для любого другого `Future`.
- Мы можем отложить выполнение кода внутри `Future`, на определённый срок с помощью `Future.delayed()`. Например, если нам нужно реализовать тротлинг операций — то есть выполнять операцию не чаще одного раза за X миллисекунд.

[[Состояния Future]]
[[Обработка результата Future]]
[[Обработка ошибки Future]]
[[Асинхронная работа]]



